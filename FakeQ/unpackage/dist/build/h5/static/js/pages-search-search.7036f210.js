(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-search-search"],{"0533":function(t,i,e){"use strict";var a=e("e239"),n=e.n(a);n.a},"3ba6":function(t,i,e){"use strict";e.r(i);var a=e("66dc"),n=e.n(a);for(var r in a)"default"!==r&&function(t){e.d(i,t,(function(){return a[t]}))}(r);i["default"]=n.a},"66dc":function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__("4ea4");__webpack_require__("d81d"),__webpack_require__("ac1f"),__webpack_require__("5319"),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _datas=_interopRequireDefault(__webpack_require__("f5ec")),_myfun=_interopRequireDefault(__webpack_require__("1059")),_myFootBar=_interopRequireDefault(__webpack_require__("9809")),_default={data:function(){return{pageIndex:1,usrArr:[],uid:"",token:"",markname:"小明",myname:"",name:"",showModify:!1,msg:""}},components:{myFootBar:_myFootBar.default},onLoad:function(){this.getStorages()},methods:{search:_myfun.default.debounce((function(t){this.usrArr=[];var i=t.detail.value;i.length>0&&this.searchUser(i)}),200),searchUser:function(t){var i=this;uni.request({url:this.serverUrl+"/search/user",data:{data:t,token:this.token},method:"POST",success:function(e){var a=e.data.status,n=e.data.result;200===a?n=n.map((function(e,a){i.isMyFriend(e,t)})):300===a?uni.navigateTo({url:"/pages/signin/signin?name="+i.myname}):500===a&&uni.showToast({title:"服务器出错了...",icon:"none",duration:1500})}})},isMyFriend:function isMyFriend(item,e){var _this2=this,tip=0,exp=eval("/"+e+"/g");item._id===this.uid?(tip=2,item.tip=tip,item.imgurl=this.serverUrl+"/"+item.imgurl,item.name=item.name.replace(exp,"<span style='color:#4AAAFF'>"+e+"</span>"),item.email=item.email.replace(exp,"<span style='color:#4AAAFF;'>"+e+"</span>"),this.usrArr.push(item)):uni.request({url:this.serverUrl+"/search/isfriend",data:{uid:this.uid,fid:item._id,token:this.token},method:"POST",success:function(t){var i=t.data.status;t.data.result;200===i?(tip=1,item.tip=tip):400===i?(tip=0,item.tip=tip):300===i?uni.navigateTo({url:"/pages/signin/signin?name="+_this2.myname}):500===i&&uni.showToast({title:"服务器出错了...",icon:"none",duration:1500}),item.tip=tip,item.imgurl=_this2.serverUrl+"/"+item.imgurl,item.name=item.name.replace(exp,"<span style='color:#4AAAFF'>"+e+"</span>"),item.email=item.email.replace(exp,"<span style='color:#4AAAFF;'>"+e+"</span>"),_this2.usrArr.push(item)}})},modify:function(t){0===t.tip?(this.showModify=!0,this.msg=this.myname+"请求添加为好友~",this.sendfid=t._id):tip},addFriendSub:function(t){var i=this;uni.request({url:this.serverUrl+"/friend/apply",data:{uid:this.uid,fid:t,msg:this.msg,token:this.token},method:"POST",success:function(t){var e=t.data.status;t.data.result;200===e?(i.showModify=!1,uni.showToast({title:"好友请求发送成功",icon:"none",duration:1500})):300===e?uni.navigateTo({url:"/pages/signin/signin?name="+i.myname}):500===e&&uni.showToast({title:"服务器出错了...",icon:"none",duration:1500})}})},getStorages:function(){try{var t=uni.getStorageSync("user");t?(this.uid=t.id,this.imgurl=this.serverUrl+"/"+t.imgurl,this.token=t.token,this.myname=t.name):uni.navigateTo({url:"../signin/signin"})}catch(i){}},backOnePage:function(){uni.navigateBack({delta:1})}}};exports.default=_default},"690b":function(t,i,e){var a=e("24fb");i=a(!1),i.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */\r\n/* 公共样式 */.contents[data-v-3c669a35]{padding-top:0}\r\n/* 顶部 */.top-bar[data-v-3c669a35]{z-index:100;width:92%;height:%?88?%;position:fixed;top:0;left:0;background:hsla(0,0%,100%,.96);border-bottom:%?1?% solid rgba(39,20,50,.1);padding-left:%?32?%;padding-right:%?32?%;padding-top:0;box-shadow:%?1?% %?1?% %?20?% %?2?% rgba(117,112,117,.2)}.top-bar .top-bar-left[data-v-3c669a35]{float:left}.top-bar .top-bar-left uni-image[data-v-3c669a35]{width:%?68?%;height:%?68?%;margin-top:%?10?%;border-radius:%?16?%}.top-bar .top-bar-center[data-v-3c669a35]{float:left}.top-bar .top-bar-center .logo[data-v-3c669a35]{display:inline-block;padding-top:%?18?%;font-size:%?24?%;color:#ffe431}.top-bar .top-bar-center .title[data-v-3c669a35]{line-height:%?88?%}.top-bar .top-bar-right[data-v-3c669a35]{float:right;box-shadow:%?8?% %?10?% %?25?% %?-5?% rgba(117,112,117,.3);border-radius:%?40?%}.top-bar .top-bar-right .search[data-v-3c669a35]{display:inline-block;width:%?70?%;height:%?78?%;padding-left:%?12?%}.top-bar .top-bar-right .add[data-v-3c669a35]{width:%?78?%;height:%?78?%;display:inline-block}.top-bar .top-bar-right i[data-v-3c669a35]{width:%?52?%;height:%?52?%;display:inline-block;font-size:%?19?%;padding:%?24?% %?5?% %?5?% %?15?%}\r\n/* 底部 */.bottom[data-v-3c669a35]{position:fixed;bottom:%?20?%;width:100%;height:%?104?%;box-sizing:border-box;padding:%?12?% %?32?%;padding-bottom:env(safe-area-inset-bottom)}.bottom .bottom-btn[data-v-3c669a35]{height:%?80?%;margin:0 auto;background:#ffe431;border-radius:%?20?%;text-align:center;line-height:%?80?%;font-size:%?32?%;color:#272832}.btn1[data-v-3c669a35]{height:%?80?%;border-radius:%?20?%;text-align:center;line-height:%?80?%;font-size:%?32?%;color:#272832}\r\n/* 顶部 */.top-bar .search-div[data-v-3c669a35]{position:absolute;top:0;left:0;width:100%;z-index:-1;padding:%?14?% %?118?% %?14?% %?32?%;box-sizing:border-box}.top-bar .search-div .search[data-v-3c669a35]{padding:0 %?60?% 0 %?12?%;height:%?60?%;background:#f3f4f6;border-radius:%?10?%}.top-bar .search-div i[data-v-3c669a35]{position:absolute;right:%?130?%;top:%?24?%}.top-bar .top-bar-right[data-v-3c669a35]{float:right;padding-right:%?8?%;margin-top:%?9?%;box-shadow:none}.top-bar .top-bar-right .text[data-v-3c669a35]{font-size:%?32?%;font-weight:500;color:#272832;line-height:%?70?%}\r\n/* 主体 */.main[data-v-3c669a35]{padding:%?88?% %?32?%}.main .result[data-v-3c669a35]{padding-top:%?32?%}.main .result .title[data-v-3c669a35]{font-size:%?44?%;font-weight:600;color:#272832;line-height:%?60?%}.main .result .list[data-v-3c669a35]{width:100%;height:%?90?%;padding:%?20?% 0}.main .result .list uni-image[data-v-3c669a35]{float:left;width:%?80?%;height:%?80?%;border-radius:%?20?%}.main .result .names[data-v-3c669a35]{float:left;padding-left:%?32?%}.main .result .names .name[data-v-3c669a35]{font-size:%?36?%;color:#272832;line-height:%?50?%}.main .result .email[data-v-3c669a35]{font-size:%?24?%;color:#272832;line-height:%?28?%}.main .result .right-btn[data-v-3c669a35]{float:right;width:%?120?%;height:%?48?%;border-radius:%?24?%;font-size:%?24?%;line-height:%?48?%;text-align:center}.main .result .send[data-v-3c669a35]{background:#ffe431;color:#272832}.main .result .add[data-v-3c669a35]{background:rgba(74,170,255,.1);color:#5799ff}\r\n/* 弹出框 */.modify[data-v-3c669a35]{position:absolute;z-index:1002;top:0;left:0;width:100%;height:100%;background-color:#fff}.modify .modify-header[data-v-3c669a35]{width:100%;height:%?88?%;padding-top:0;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-align:center;-webkit-align-items:center;align-items:center;border-bottom:%?1?% solid rgba(39,20,50,.1);box-shadow:%?1?% %?1?% %?20?% %?2?% rgba(117,112,117,.2)}.modify .modify-header .close[data-v-3c669a35]{padding-left:%?32?%;font-size:%?32?%;color:#272832;line-height:%?44?%}.modify .modify-header .title[data-v-3c669a35]{-webkit-box-flex:1;-webkit-flex:auto;flex:auto;text-align:center;font-size:%?40?%;color:#272832;line-height:%?88?%}.modify .modify-header .define[data-v-3c669a35]{padding-right:%?32?%;font-size:%?35?%;color:#5799ff;line-height:%?88?%}.modify .modify-main[data-v-3c669a35]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;padding:%?32?%}.modify .modify-main .modify-pwd[data-v-3c669a35]{padding:0 %?22?%;margin-bottom:%?32?%;-webkit-box-flex:1;-webkit-flex:auto;flex:auto;height:%?88?%;background:#f3f4f6;border-radius:%?20?%;font-size:%?32?%;color:#272832;line-height:%?88?%}.modify .modify-main .modify-content[data-v-3c669a35]{-webkit-box-flex:1;-webkit-flex:1;flex:1;height:386;padding:%?22?%;margin:0 auto;background:#f3f4f6;border-radius:%?20?%;font-size:%?32?%;color:#272832;line-height:%?44?%}',""]),t.exports=i},9372:function(t,i,e){"use strict";e.r(i);var a=e("a5af"),n=e("3ba6");for(var r in n)"default"!==r&&function(t){e.d(i,t,(function(){return n[t]}))}(r);e("0533");var o,s=e("f0c5"),d=Object(s["a"])(n["default"],a["b"],a["c"],!1,null,"3c669a35",null,!1,a["a"],o);i["default"]=d.exports},a5af:function(t,i,e){"use strict";var a;e.d(i,"b",(function(){return n})),e.d(i,"c",(function(){return r})),e.d(i,"a",(function(){return a}));var n=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("v-uni-view",{staticClass:"contents animate__animated animate__fadeIn animate__faster"},[e("v-uni-view",{staticClass:"top-bar"},[e("v-uni-view",{staticClass:"search-div"},[e("i",{staticClass:"iconfont icon-searchsousuo"}),e("v-uni-input",{staticClass:"search",attrs:{focus:"true",type:"search",value:"",placeholder:"输入用户名/邮箱","placeholder-style":"color: #aaa; font-weight:400;"},on:{input:function(i){arguments[0]=i=t.$handleEvent(i),t.search.apply(void 0,arguments)}}})],1),e("v-uni-view",{staticClass:"top-bar-right",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.backOnePage.apply(void 0,arguments)}}},[e("v-uni-view",{staticClass:"text"},[t._v("取消")])],1)],1),e("v-uni-view",{staticClass:"main"},[e("v-uni-view",{staticClass:"search-user result"},[e("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:t.usrArr.length>0,expression:"usrArr.length > 0"}],staticClass:"title"},[t._v("用户")]),t._l(t.usrArr,(function(i,a){return e("v-uni-view",{staticClass:"list user animate__animated animate__fadeIn animate__faster ",attrs:{keys:i.id}},[e("v-uni-navigator",{attrs:{url:"../userhome/userhome?id="+i._id}},[e("v-uni-image",{attrs:{src:i.imgurl,mode:""}})],1),e("v-uni-view",{staticClass:"names"},[e("v-uni-view",{staticClass:"name",domProps:{innerHTML:t._s(i.name)}}),e("v-uni-view",{staticClass:"email",domProps:{innerHTML:t._s(i.email)}})],1),e("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:2!==i.tip,expression:"item.tip!==2"}],staticClass:"right-btn",class:{add:0===i.tip,send:1===i.tip},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.modify(i)}}},[t._v(t._s(1===i.tip?"发消息":"加好友"))])],1)}))],2)],1),e("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:t.showModify,expression:"showModify"}],staticClass:"modify animate__animated animate__slideInUp animate__faster"},[e("v-uni-view",{staticClass:"modify-header "},[e("v-uni-view",{staticClass:"close",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.showModify=!1}}},[t._v("退出")]),e("v-uni-view",{staticClass:"title"},[t._v("添加好友")]),e("v-uni-view",{staticClass:"define",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.addFriendSub(t.sendfid)}}},[t._v("发送")])],1),e("v-uni-view",{staticClass:"modify-main"},[e("v-uni-textarea",{staticClass:"modify-content",model:{value:t.msg,callback:function(i){t.msg=i},expression:"msg"}})],1)],1),e("myFootBar",{attrs:{pageIndex:t.pageIndex}})],1)},r=[]},e239:function(t,i,e){var a=e("690b");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=e("4f06").default;n("0c632a8e",a,!0,{sourceMap:!1,shadowMode:!1})}}]);